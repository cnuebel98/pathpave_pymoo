import matplotlib.pyplot as plt
import numpy as np
import matplotlib.patches as patches

def draw_line_between_points(ax, point1, point2, label=None, linewidth=4):
    """Draws a black line between two points."""
    ax.plot([point1[1], point2[1]], [point1[0], point2[0]], 'k-', linewidth=linewidth)
    # If a label is provided, place the label at the midpoint of the line
    if label:
        midpoint = (((point1[0] + point2[0]) / 2)-1.5, ((point1[1] + point2[1]) / 2)-1.9)
        ax.text(midpoint[1], midpoint[0], label, color='black', fontsize=15, ha='center', va='center',style="normal")

def draw_connecting_lines(ax, point1, point2, label=None, linewidth=4):
    ax.plot([point1[1], point2[1]], [point1[0], point2[0]],'k-', linewidth=linewidth)
    # If a label is provided, place the label at the midpoint of the line
    if label:
        midpoint = (((point1[0] + point2[0]) / 2)-1.5, ((point1[1] + point2[1]) / 2)+1.9)
        ax.text(midpoint[1], midpoint[0], label, color='black', fontsize=15, ha='center', va='center',style="normal")

def show_map_with_path_with_cuts():
    # Create a plot for the final grid with paths
    fig, ax = plt.subplots(figsize=(7, 7))

    # Display the obstacle weights in the grid
    #for i in range(height):
    #    for j in range(width):
    #        ax.text(j, i, f'{obstacles[i, j]:.2f}', va='center', ha='center', fontsize=12)
    start = (50,25)
    end = (0,25)
    paths = [    
    [(50, 25), (49, 25), (48, 25), (47, 25), (46, 25), (45, 25), (44, 25), (43, 25), (42, 25), (41, 25), (40, 25),(40, 24), (40, 23), (40, 22), (40, 21), (40, 20), (40, 19), (40, 18), (40, 17), (40, 16), (40, 15),(39, 15), (38, 15), (37, 15), (36, 15), (35, 15), (34, 15), (33, 15), (32, 15), (31, 15), (30, 15),(30, 16), (30, 17), (30, 18), (30, 19), (30, 20), (30, 21), (30, 22), (30, 23), (30, 24), (30, 25),(30, 26), (30, 27), (30, 28), (30, 29), (30, 30), (30, 31), (30, 32), (30, 33), (30, 34), (30, 35),(29, 35), (28, 35), (27, 35), (26, 35), (25, 35), (24, 35), (23, 35), (22, 35), (21, 35), (20, 35),(19, 35), (18, 35), (17, 35), (16, 35), (15, 35), (14, 35), (13, 35), (12, 35), (11, 35), (10, 35),(10, 34), (10, 33), (10, 32), (10, 31), (10, 30), (10, 29), (10, 28), (10, 27), (10, 26), (10, 25),(9, 25), (8, 25), (7,25), (6,25), (5, 25),(4, 25), (3, 25), (2, 25), (1, 25), (0, 25)]
    ,[(50, 25), (50, 26), (50, 27), (50, 28), (50, 29), (50, 30),(49, 30), (48, 30), (47, 30), (46, 30), (45, 30), (44, 30), (43, 30), (42, 30), (41, 30), (40, 30), (39, 30), (38, 30), (37, 30), (36, 30), (35, 30),(35, 29), (35, 28), (35, 27), (35, 26), (35, 25), (35, 24), (35, 23), (35, 22), (35, 21), (35, 20),(34, 20), (33, 20), (32, 20), (31, 20), (30, 20), (29, 20), (28, 20), (27, 20), (26, 20), (25, 20), (24, 20), (23, 20), (22, 20), (21, 20), (20, 20),(20, 21), (20, 22), (20, 23), (20, 24), (20, 25), (20, 26), (20, 27), (20, 28), (20, 29), (20, 30), (20, 31), (20, 32), (20, 33), (20, 34), (20, 35), (20, 36), (20, 37), (20, 38), (20, 39), (20, 40),(19, 40), (18, 40), (17, 40), (16, 40), (15, 40), (15, 41), (15, 42), (15, 42), (15, 43), (15, 44), (15, 45), (14, 45), (13, 45), (12, 45), (11, 45), (10, 45), (10, 44), (10, 43), (10, 42), (10, 41), (10, 40), (9, 40), (8, 40), (7, 40), (6, 40), (5, 40),(5, 39), (5, 38), (5, 37), (5, 36), (5, 35), (5, 34), (5, 33), (5, 32), (5, 31), (5, 30),(4, 30), (3, 30), (2, 30), (1, 30), (0, 30),(0, 29), (0, 28), (0, 27), (0, 26), (0, 25)]
    ,[(40, 20), (40, 21), (40,22), (40, 23), (39,23), (39, 24), (39,25), (39, 26), (39, 27), (38,27), (38, 28), (38,29), (38,30)]
    ,[(20,25), (20,26), (20,27), (21, 27), (21,28), (22,28), (22,29), (22,30), (23, 30), (23, 31), (23, 32), (24,32), (24, 33), (25, 33), (25, 34), (25, 35) ]
    ]
    reversed_connection1 = [(38, 30), (38, 29), (38, 28), (38, 27), (39, 27), (39, 26), (39, 25), (39, 24), (39, 23), (40, 23), (40, 22), (40, 21), (40, 20)]
    reversed_connection2 = [(25, 35), (25, 34), (25, 33), (24, 33), (24, 32), (23, 32), (23, 31), (23, 30), (22, 30), (22, 29), (22, 28), (21, 28), (21, 27), (20, 27), (20, 26), (20, 25)]
    children = [
        #[(50, 25), (49, 25), (48, 25), (47, 25), (46, 25), (45, 25), (44, 25), (43, 25), (42, 25), (41, 25), (40, 25),(40, 24), (40, 23), (40, 22), (40, 21), (40, 20),(40, 21), (40,22), (40, 23), (39,23), (39, 24), (39,25), (39, 26), (39, 27), (38,27), (38, 28), (38,29),(38, 30), (37, 30), (36, 30), (35, 30),(35, 29), (35, 28), (35, 27), (35, 26), (35, 25), (35, 24), (35, 23), (35, 22), (35, 21), (35, 20),(34, 20), (33, 20), (32, 20), (31, 20), (30, 20), (29, 20), (28, 20), (27, 20), (26, 20), (25, 20), (24, 20), (23, 20), (22, 20), (21, 20), (20, 20),(20, 21), (20, 22), (20, 23), (20, 24), (20,25), (20,26), (20,27), (21, 27), (21,28), (22,28), (22,29), (22,30), (23, 30), (23, 31), (23, 32), (24,32), (24, 33), (25, 33), (25, 34), (25, 35), (24, 35), (23, 35), (22, 35), (21, 35), (20, 35),(19, 35), (18, 35), (17, 35), (16, 35), (15, 35), (14, 35), (13, 35), (12, 35), (11, 35), (10, 35),(10, 34), (10, 33), (10, 32), (10, 31), (10, 30), (10, 29), (10, 28), (10, 27), (10, 26), (10, 25),(9, 25), (8, 25), (7,25), (6,25), (5, 25),(4, 25), (3, 25), (2, 25), (1, 25), (0, 25)]
        [(0,25)]
        ,[(50, 25), (50, 26), (50, 27), (50, 28), (50, 29), (50, 30),(49, 30), (48, 30), (47, 30), (46, 30), (45, 30), (44, 30), (43, 30), (42, 30), (41, 30), (40, 30), (39, 30), (38, 30), (38, 29), (38, 28), (38, 27), (39, 27), (39, 26), (39, 25), (39, 24), (39, 23), (40, 23), (40, 22), (40, 21), (40, 20),(40, 19), (40, 18), (40, 17), (40, 16), (40, 15),(39, 15), (38, 15), (37, 15), (36, 15), (35, 15), (34, 15), (33, 15), (32, 15), (31, 15), (30, 15),(30, 16), (30, 17), (30, 18), (30, 19), (30, 20), (30, 21), (30, 22), (30, 23), (30, 24), (30, 25),(30, 26), (30, 27), (30, 28), (30, 29), (30, 30), (30, 31), (30, 32), (30, 33), (30, 34), (30, 35),(29, 35), (28, 35), (27, 35), (26, 35), (25, 35), (25, 34), (25, 33), (24, 33), (24, 32), (23, 32), (23, 31), (23, 30), (22, 30), (22, 29), (22, 28), (21, 28), (21, 27), (20, 27), (20, 26), (20, 25), (20, 26), (20, 27), (20, 28), (20, 29), (20, 30), (20, 31), (20, 32), (20, 33), (20, 34), (20, 35), (20, 36), (20, 37), (20, 38), (20, 39), (20, 40),(19, 40), (18, 40), (17, 40), (16, 40), (15, 40), (15, 41), (15, 42), (15, 42), (15, 43), (15, 44), (15, 45), (14, 45), (13, 45), (12, 45), (11, 45), (10, 45), (10, 44), (10, 43), (10, 42), (10, 41), (10, 40), (9, 40), (8, 40), (7, 40), (6, 40), (5, 40),(5, 39), (5, 38), (5, 37), (5, 36), (5, 35), (5, 34), (5, 33), (5, 32), (5, 31), (5, 30),(4, 30), (3, 30), (2, 30), (1, 30), (0, 30),(0, 29), (0, 28), (0, 27), (0, 26), (0, 25)]
        ,[(30,21), (30,22),(30,23),(31,23),(31,24),(31,25),(32,25),(32,26),(32,27),(33,27),(33,28),(33,29),(34,29),(34,30),(34,31),(35,31),(35,32),(35,33),(35,34),(34,34),(33,34),(32,34),(31,34),(31,35),(30,35),(29,35),(29,36),(28,36),(27,36),(27,37),(26,37),(25,37),(25,38),(24,38),(23,38),(23,39),(22,39),(21,39),(21,40),(20,40),(19,40),(18,40)]
        
    ]

    children_new = [
        #[(50, 25), (49, 25), (48, 25), (47, 25), (46, 25), (45, 25), (44, 25), (43, 25), (42, 25), (41, 25), (40, 25),(40, 24), (40, 23), (40, 22), (40, 21), (40, 20),(40, 21), (40,22), (40, 23), (39,23), (39, 24), (39,25), (39, 26), (39, 27), (38,27), (38, 28), (38,29),(38, 30), (37, 30), (36, 30), (35, 30),(35, 29), (35, 28), (35, 27), (35, 26), (35, 25), (35, 24), (35, 23), (35, 22), (35, 21), (35, 20),(34, 20), (33, 20), (32, 20), (31, 20), (30, 20), (29, 20), (28, 20), (27, 20), (26, 20), (25, 20), (24, 20), (23, 20), (22, 20), (21, 20), (20, 20),(20, 21), (20, 22), (20, 23), (20, 24), (20,25), (20,26), (20,27), (21, 27), (21,28), (22,28), (22,29), (22,30), (23, 30), (23, 31), (23, 32), (24,32), (24, 33), (25, 33), (25, 34), (25, 35), (24, 35), (23, 35), (22, 35), (21, 35), (20, 35),(19, 35), (18, 35), (17, 35), (16, 35), (15, 35), (14, 35), (13, 35), (12, 35), (11, 35), (10, 35),(10, 34), (10, 33), (10, 32), (10, 31), (10, 30), (10, 29), (10, 28), (10, 27), (10, 26), (10, 25),(9, 25), (8, 25), (7,25), (6,25), (5, 25),(4, 25), (3, 25), (2, 25), (1, 25), (0, 25)]
        [(0,25)]
        ,[(50, 25), (50, 26), (50, 27), (50, 28), (50, 29), (50, 30),(49, 30), (48, 30), (47, 30), (46, 30), (45, 30), (44, 30), (43, 30), (42, 30), (41, 30), (40, 30), (39, 30), (38, 30), (38, 29), (38, 28), (38, 27), (39, 27), (39, 26), (39, 25), (39, 24), (39, 23), (40, 23), (40, 22), (40, 21), (40, 20),(40, 19), (40, 18), (40, 17), (40, 16), (40, 15),(39, 15), (38, 15), (37, 15), (36, 15), (35, 15), (34, 15), (33, 15), (32, 15), (31, 15), (30, 15),(30, 16), (30, 17), (30, 18), (30, 19), (30, 20), (30, 21), (30, 22), (30, 23), (30, 24), (30, 25),(30, 26), (30, 27), (30, 28), (30, 29), (30, 30), (30, 31), (30, 32), (30, 33), (30, 34), (30, 35),(29, 35), (28, 35), (27, 35), (26, 35), (25, 35), (25, 34), (25, 33), (24, 33), (24, 32), (23, 32), (23, 31), (23, 30), (22, 30), (22, 29), (22, 28), (21, 28), (21, 27), (20, 27), (20, 26), (20, 25), (20, 26), (20, 27), (20, 28), (20, 29), (20, 30), (20, 31), (20, 32), (20, 33), (20, 34), (20, 35), (20, 36), (20, 37), (20, 38), (20, 39), (20, 40),(19, 40), (18, 40), (17, 40), (16, 40), (15, 40), (15, 41), (15, 42), (15, 42), (15, 43), (15, 44), (15, 45), (14, 45), (13, 45), (12, 45), (11, 45), (10, 45), (10, 44), (10, 43), (10, 42), (10, 41), (10, 40), (9, 40), (8, 40), (7, 40), (6, 40), (5, 40),(5, 39), (5, 38), (5, 37), (5, 36), (5, 35), (5, 34), (5, 33), (5, 32), (5, 31), (5, 30),(4, 30), (3, 30), (2, 30), (1, 30), (0, 30),(0, 29), (0, 28), (0, 27), (0, 26), (0, 25)]
    ]

    child_mut=[
        [(0,25)]
        ,[(50, 25), (50, 26), (50, 27), (50, 28), (50, 29), (50, 30),(49, 30), (48, 30), (47, 30), (46, 30), (45, 30), (44, 30), (43, 30), (42, 30), (41, 30), (40, 30), (39, 30), (38, 30), (38, 29), (38, 28), (38, 27), (39, 27), (39, 26), (39, 25), (39, 24), (39, 23), (40, 23), (40, 22), (40, 21), (40, 20),(40, 19), (40, 18), (40, 17), (40, 16), (40, 15),(39, 15), (38, 15), (37, 15), (36, 15), (35, 15), (34, 15), (33, 15), (32, 15), (31, 15), (30, 15),(30, 16), (30, 17), (30, 18), (30, 19), (30, 20), (30, 21), (30, 22), (30, 23), (30, 24), (30, 25),(30, 26), (30, 27), (30, 28), (30, 29), (30, 30), (30, 31), (30, 32), (30, 33), (30, 34), (30, 35),(29, 35), (28, 35), (27, 35), (26, 35), (25, 35), (25, 34), (25, 33), (24, 33), (24, 32), (23, 32), (23, 31), (23, 30), (22, 30), (22, 29), (22, 28), (21, 28), (21, 27), (20, 27), (20, 26), (20, 25), (20, 26), (20, 27), (20, 28), (20, 29), (20, 30), (20, 31), (20, 32), (20, 33), (20, 34), (20, 35), (20, 36), (20, 37), (20, 38), (20, 39), (20, 40),(19, 40), (18, 40), (17, 40), (16, 40), (15, 40), (15, 41), (15, 42), (15, 42), (15, 43), (15, 44), (15, 45), (14, 45), (13, 45), (12, 45), (11, 45), (10, 45), (10, 44), (10, 43), (10, 42), (10, 41), (10, 40), (9, 40), (8, 40), (7, 40), (6, 40), (5, 40),(5, 39), (5, 38), (5, 37), (5, 36), (5, 35), (5, 34), (5, 33), (5, 32), (5, 31), (5, 30),(4, 30), (3, 30), (2, 30), (1, 30), (0, 30),(0, 29), (0, 28), (0, 27), (0, 26), (0, 25)]
        ,[(30,21), (30,22),(30,23),(31,23),(31,24),(31,25),(32,25),(32,26),(32,27),(33,27),(33,28),(33,29),(34,29),(34,30),(34,31),(35,31),(35,32),(35,33),(35,34),(34,34),(33,34),(32,34),(31,34),(31,35),(30,35),(29,35),(29,36),(28,36),(27,36),(27,37),(26,37),(25,37),(25,38),(24,38),(23,38),(23,39),(22,39),(21,39),(21,40),(20,40),(19,40),(18,40)]
        
    ]

    child_mutated=[
        [(0,25)]
        ,[(50, 25), (50, 26), (50, 27), (50, 28), (50, 29), (50, 30),(49, 30), (48, 30), (47, 30), (46, 30), (45, 30), (44, 30), (43, 30), (42, 30), (41, 30), (40, 30), (39, 30), (38, 30), (38, 29), (38, 28), (38, 27), (39, 27), (39, 26), (39, 25), (39, 24), (39, 23), (40, 23), (40, 22), (40, 21), (40, 20),(40, 19), (40, 18), (40, 17), (40, 16), (40, 15),(39, 15), (38, 15), (37, 15), (36, 15), (35, 15), (34, 15), (33, 15), (32, 15), (31, 15), (30, 15),(30, 16), (30, 17), (30, 18), (30, 19), (30, 20), (30, 21), (30,22),(30,23),(31,23),(31,24),(31,25),(32,25),(32,26),(32,27),(33,27),(33,28),(33,29),(34,29),(34,30),(34,31),(35,31),(35,32),(35,33),(35,34),(34,34),(33,34),(32,34),(31,34),(31,35),(30,35),(29,35),(29,36),(28,36),(27,36),(27,37),(26,37),(25,37),(25,38),(24,38),(23,38),(23,39),(22,39),(21,39),(21,40),(20,40),(19,40),(18,40), (17, 40), (16, 40), (15, 40), (15, 41), (15, 42), (15, 42), (15, 43), (15, 44), (15, 45), (14, 45), (13, 45), (12, 45), (11, 45), (10, 45), (10, 44), (10, 43), (10, 42), (10, 41), (10, 40), (9, 40), (8, 40), (7, 40), (6, 40), (5, 40),(5, 39), (5, 38), (5, 37), (5, 36), (5, 35), (5, 34), (5, 33), (5, 32), (5, 31), (5, 30),(4, 30), (3, 30), (2, 30), (1, 30), (0, 30),(0, 29), (0, 28), (0, 27), (0, 26), (0, 25)]    
    ]


    paths = child_mut
    

    width = 51
    height = 51
    
    obstacle_map = np.zeros((51,51))
    # Plot the grid
    ax.imshow(obstacle_map, cmap='Greys', interpolation='nearest')

    # Mark the start and end points
    ax.plot(start[1], start[0], 'go', markersize=10, label='Start')  # Start point
    ax.plot(end[1], end[0], 'ro', markersize=10, label='End')        # End point

    # Plot the paths of the final population
    if len(paths[0]) != 2:
        for path in paths:
            path_y, path_x = zip(*path)
            ax.plot(path_x, path_y, marker='o')
    elif len(paths[0]) == 2:
        path_y, path_x = zip(*paths)
        ax.plot(path_x, path_y, marker='o')

    # Draw line between two specified points

    point1, point2 = (23, 30), (25, 33)
    point3, point4 = (17, 38), (17, 42)
    point5, point6 = (28, 20), (32, 20)
    point7, point8 = (30, 20), (17, 40)
    mid = (23.5, 30)
    sampled_p=(35,34)
    c1 = (38,30)
    c2 = (20,25)
    c3 = (40,20)
    c4 = (25,35)

    r_point1, r_point2 =(23.5,9.6),(23.5,30)

    #draw_line_between_points(ax, point1, point2, label="Mid")
    draw_line_between_points(ax, point3, point4, label="C2")
    draw_line_between_points(ax, point5, point6, label="C1")
    draw_line_between_points(ax, point7, point8, label="")

    draw_line_between_points(ax,r_point2, r_point1, label="R", linewidth=2)

    ax.plot(mid[1], mid[0], 'ko', markersize=12, label='Mid')
    ax.text(mid[1], mid[0] + 2.5, 'M', color='black', fontsize=17, ha='center', va='center',style="normal")
    
    #draw_connecting_lines(ax, c1, c3)
    #draw_connecting_lines(ax, c2, c4)

    circle = patches.Circle((mid[1], mid[0]), radius=20.4, edgecolor='black', facecolor='none', linewidth=2)
    ax.add_patch(circle)
    
    ax.plot(sampled_p[1], sampled_p[0], 'ko', markersize=12, label='Mid')
    ax.text(sampled_p[1], sampled_p[0] + 2.5, 'S', color='black', fontsize=17, ha='center', va='center',style="normal")
    # Set the ticks and labels
    # Set x and y ticks in steps of 10
    ax.set_xticks(np.arange(0, width, 5))
    ax.set_yticks(np.arange(0, height, 5))

    # Set x and y tick labels in steps of 10
    ax.set_xticklabels(np.arange(0, width, 5))
    ax.set_yticklabels(np.arange(0, height, 5))

    #plt.title("Obstacle Environment")
    plt.show()


show_map_with_path_with_cuts()